---

layout: post
title: 加密方式
categories: Safe
description: 加密方式
keywords: des、aes、rsa
tags: des、aes、rsa

---

## 对称加密

- 加密端和解密端的key一样则为对称加密（Symmetric）
1. 置换加密：替换原始字符，顺序不发生变化
2. 转置加密：对原始字符顺序变化，字符不变
3. 乘积加密：即使用置换又使用转置加密
4. DES（Data Encryption Standard）：每取64bit数据(8byte)作为一加密单元经过19道工序（反复的进行转置置换的乘积加密）加密秘钥为56bit秘钥。
5. AES（Advanced Encryption Standard）：每取128bit数据作为一加密单元，秘钥长度可选128bit，192bit，256bit秘钥长度。


- 优点：高效，加密解密速度快
- 缺点：秘钥交换安全问题，不如RSA的加密安全程度高（使用256bit秘钥可以胜任大都数情况）

## 非对称加密

- 非对称加密：加密秘钥和解密秘钥不一样，公钥加密私钥解密。

1. RSA加密：建立在分解大数的困难度（分解大素数等），公钥/私钥的长度至少1024bit

- 优点：安全性足够高，没有秘钥交换问题
- 缺点：效率低，对于大数据加密很慢

## 密钥交换

- 利用公钥密码来交换会话密钥
1. 实时随机的会话密钥产生
2. 使用对端的公钥对产生的会话密钥加密并传递给对端
3. 对端使用私钥解密获取会话密钥
4. 双方基于共享的会话密钥进行对称加密的保密会话通讯

- Diffie-Hellman密钥交换协议 
1. 基于大素数为模计算离散对数的困难度
2. 双方各自选定key，然后以一定的算法变换后传输给对方
3. 双方利用对方交换来的数据和自己选定的key做变换，获得一个一致的结果，作为会话密钥

```
A：产生 keyA 进行变换生成msgA 
B: 产生 keyB 进行变换生成MsgB

A: 发送 msgA 给 B
B: 发送 msgB 给 A

A: 使用MsgB和KeyA变换生成key
B：使用MsgA和keyB变换生产key
```


### HASH

- HASH翻译为散列或者哈希函数（HASH、哈希、散列、MD、消息摘要、数字指纹）
- 定义：变长的输入变换成定长的输出
- 常见HASH算法:MD5(128bit),SHA1(160bit)
- 特点
1. 易变性：即使原始信息只有1bit的变化，也会引起输出产生不可预知的巨大变化
2. 不可逆：通过HASH构造结果构造出满足的输入信息是不可能或极其困难的
- 应用场景：
1. 防篡改：文件下载时MD5、消息传送时尾部额外传MD5
2. 防损坏：CRC（通信）校验、MD校验消息恶劣环境传输的完整性和未受损坏、应用程序对文件，数据库读写的鲁棒性保护，防止掉电和Crash
3. 认证：HTTP的Basic和Digest认证、PPP的PAP和CHAP认证、手机登录密码和隐藏MMI的设计

### HMAC

- 定义：使用key对原始信息变换后再进行HASH（解决重放攻击和复制尾部HASH参数攻击）

## 电子签名

- 流程

1. 原始消息P 经过HASH 生成 MD
2. 使用私钥对MD进行RSA加密生成电子签名
3. 服务器发送原始消息P 和 电子签名的拼接串
4. 客户端使用公钥解密得到HASH后生成的MD，客户端对P 进行HASH生成MD1 然后对比MD与MD1是否相等


## 证书
- 作用
1. 公钥的存储和交换（公钥作为一个字段存储在数字证书里进行交换）
2. 利用签名来保护数字证书本身（证书会附带指纹字段（签名），颁发者使用私钥对证书签名，使用者只要使用证书附带的公钥解证书附带的指纹，得出的hash值需要与指纹一致）
3. 证书链：如果是受信任的级别的机构颁发的证书他之下的颁发也是信任的（根证书自签名，非根证书父签名）
- 限制
1. 约束：是否可以颁发下级证书等
2. 用途：证书会指明用途
3. 有效性：有效期限制

### PKI（Public Key Infrastructure）

- 定义（公钥基础设施）
1. PKI是一种遵循标准的利用公钥加密技术为电子商务的开展提供一套安全基础平台的技术和规范。


